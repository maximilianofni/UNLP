TestCase subclass: #WorldTransfersTest	instanceVariableNames: 'fargo jpm wu xoom worldTransfers'	classVariableNames: ''	poolDictionaries: ''	category: 'WorldTransfers-Tests'!!WorldTransfersTest commentStamp: '<historical>' prior: 0!A WorldTransfersTest is a test class for testing the behavior of WorldTransfers!!WorldTransfersTest methodsFor: 'tests-public' stamp: 'ArturoZambrano 6/6/2018 19:01'!testTransferTo	|   rebecca  helen transfer|		rebecca := Receiver name: 'Rebecca Strange' continent: #europa.	transfer := worldTransfers transfer: 100 to: rebecca.	self assert: transfer total equals: 103.5.	self assert: transfer medium equals: jpm.	transfer := worldTransfers transfer: 1000000 to: rebecca.	self assert: transfer total equals: 1000011.75.	self assert: transfer medium equals: wu.		helen:=Receiver name: 'Helen' continent: #asia.	transfer := worldTransfers transfer: 10 to: helen.	self assert: transfer total equals: 10.7.	self assert: transfer medium equals: fargo.		! !!WorldTransfersTest methodsFor: 'tests-public' stamp: 'ArturoZambrano 6/6/2018 19:44'!testContinentWithMoreTransfers	| rebecca helen |	rebecca := Receiver name: 'Rebecca Strange' continent: #europa.	worldTransfers transfer: 100 to: rebecca.	worldTransfers transfer: 10 to: rebecca.	helen := Receiver name: 'Helen' continent: #asia.	worldTransfers transfer: 1000 to: helen.	self assert: worldTransfers continentWithMoreTransfers equals:#asia.	worldTransfers transfer: 900 to: rebecca.	self assert: worldTransfers continentWithMoreTransfers equals:#europa.   ! !!WorldTransfersTest methodsFor: 'tests-public' stamp: 'ArturoZambrano 6/6/2018 20:08'!testAllTransfersTimeSorted	| rebecca helen t1 t2 t3 |	rebecca := Receiver name: 'Rebecca Strange' continent: #europa.	t1 := worldTransfers transfer: 100 to: rebecca.	t2 := worldTransfers transfer: 1000000 to: rebecca.	helen := Receiver name: 'Helen' continent: #asia.	t3 := worldTransfers transfer: 10 to: helen.	self assert: worldTransfers allTransfersTimeSorted first = t3.	self assert: worldTransfers allTransfersTimeSorted last = t1! !!WorldTransfersTest methodsFor: 'tests-public' stamp: 'ArturoZambrano 6/6/2018 18:25'!setUp		fargo := Bank		charges:			{(#americas -> 0.05).			(#europa -> 0.05).			(#asia -> 0.07).			(#oceania -> 0.13)} asDictionary.	jpm := Bank		charges:			{(#americas -> 0.03).			(#europa -> 0.035).			(#asia -> 0.15).			(#oceania -> 0.11)} asDictionary.	wu := Agency		fixFee: 6.75		fees:			{(#americas -> 5).			(#europa -> 5).			(#asia -> 15).			(#oceania -> 20)} asDictionary.	xoom := Agency		fixFee: 15		fees:			{(#americas -> 10).			(#europa -> 20).			(#asia -> 2).			(#oceania -> 0)} asDictionary.	worldTransfers := WorldTransfers		mediums:			(OrderedCollection				with: fargo				with: jpm				with: xoom				with: wu) ! !!WorldTransfersTest methodsFor: 'tests-public' stamp: 'ArturoZambrano 6/6/2018 19:10'!testBiggestTransfer	| rebecca t1 t2 helen t3 |	rebecca := Receiver name: 'Rebecca Strange' continent: #europa.	t1 := worldTransfers transfer: 100 to: rebecca.	t2 := worldTransfers transfer: 1000000 to: rebecca.	helen := Receiver name: 'Helen' continent: #asia.	t3 := worldTransfers transfer: 10 to: helen.	self assert: worldTransfers biggestTransfer equals: t2! !Object subclass: #Receiver	instanceVariableNames: 'name continent'	classVariableNames: ''	poolDictionaries: ''	category: 'WorldTransfers'!!Receiver methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 09:30'!continent: anObject	continent := anObject! !!Receiver methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 09:30'!name: anObject	name := anObject! !!Receiver methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 09:30'!name	^ name! !!Receiver methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 09:30'!continent	^ continent! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Receiver class	instanceVariableNames: ''!!Receiver class methodsFor: 'instance cre' stamp: 'ArturoZambrano 6/5/2018 09:33'!name: aString continent: aSymbol	^ self new		name: aString;		continent: aSymbol;		yourself! !Object subclass: #Transfer	instanceVariableNames: 'amount receiver medium timestamp'	classVariableNames: ''	poolDictionaries: ''	category: 'WorldTransfers'!!Transfer methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 09:53'!amount	^ amount! !!Transfer methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 09:54'!receiver: anObject	receiver := anObject! !!Transfer methodsFor: 'accessing' stamp: 'ArturoZambrano 6/6/2018 18:42'!timestamp	^ timestamp! !!Transfer methodsFor: 'accessing' stamp: 'ArturoZambrano 6/6/2018 19:33'!continent	^ receiver continent! !!Transfer methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 09:53'!amount: anObject	amount := anObject! !!Transfer methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 09:54'!receiver	^ receiver! !!Transfer methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 09:54'!medium: anObject	medium := anObject! !!Transfer methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 09:54'!medium	^ medium! !!Transfer methodsFor: 'public' stamp: 'ArturoZambrano 6/5/2018 09:55'!total  ^amount + (medium transferCost: amount to:receiver)! !!Transfer methodsFor: 'initialization' stamp: 'ArturoZambrano 6/6/2018 18:38'!initialize  timestamp := DateAndTime  now.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Transfer class	instanceVariableNames: ''!!Transfer class methodsFor: 'as yet unclassified' stamp: 'ArturoZambrano 6/5/2018 10:25'!amount: anAmount receiver: aReceiver medium: aMedium	^ self new		amount: anAmount;		receiver: aReceiver;		medium: aMedium;		yourself! !Object subclass: #TransferMedium	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'WorldTransfers'!!TransferMedium methodsFor: 'public' stamp: 'ArturoZambrano 6/5/2018 09:56'!transferCost: anAmount to:aReceiver ^self subclassResponsibility ! !TransferMedium subclass: #Agency	instanceVariableNames: 'fees fixFee'	classVariableNames: ''	poolDictionaries: ''	category: 'WorldTransfers'!!Agency methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 10:03'!fees	^ fees! !!Agency methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 10:04'!fixFee	^ fixFee! !!Agency methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 10:03'!fees: anObject	fees := anObject! !!Agency methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 10:04'!fixFee: anObject	fixFee := anObject! !!Agency methodsFor: 'public' stamp: 'ArturoZambrano 6/5/2018 10:01'!transferCost: anAmount to:aReceiver    ^   fixFee + (fees at: aReceiver continent)  ! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Agency class	instanceVariableNames: ''!!Agency class methodsFor: 'as yet unclassified' stamp: 'ArturoZambrano 6/5/2018 10:06'!fixFee: aNumber fees: aDictionary	^ self new		fixFee: aNumber;		fees: aDictionary;		yourself! !TransferMedium subclass: #Bank	instanceVariableNames: 'charges'	classVariableNames: ''	poolDictionaries: ''	category: 'WorldTransfers'!!Bank methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 10:03'!charges	^ charges! !!Bank methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 10:03'!charges: anObject	charges := anObject! !!Bank methodsFor: 'public' stamp: 'ArturoZambrano 6/5/2018 10:01'!transferCost: anAmount to:aReceiver    ^ (charges at: aReceiver continent)  * anAmount.  ! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Bank class	instanceVariableNames: ''!!Bank class methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 10:05'!charges: aDictionary	^ self new		charges: aDictionary;		yourself! !Object subclass: #WorldTransfers	instanceVariableNames: 'mediums transfers'	classVariableNames: ''	poolDictionaries: ''	category: 'WorldTransfers'!!WorldTransfers methodsFor: 'initialization' stamp: 'ArturoZambrano 6/5/2018 10:25'!initialize	mediums := OrderedCollection new.	transfers := OrderedCollection new! !!WorldTransfers methodsFor: 'public' stamp: 'ArturoZambrano 6/6/2018 18:55'!allTransfersTimeSorted  ^transfers asSortedCollection: [:t1 :t2|  t1 timestamp > t2 timestamp ]! !!WorldTransfers methodsFor: 'public' stamp: 'ArturoZambrano 6/6/2018 18:20'!transfer: unMonto to: unDestinario	| selectedMedium transfer |	selectedMedium := self selectCheapestMediumFor: unDestinario transferring: unMonto.	transfer := self transfer: unMonto to: unDestinario using: selectedMedium.	^ transfer ! !!WorldTransfers methodsFor: 'public' stamp: 'ArturoZambrano 6/6/2018 19:13'!biggestTransfer	^ transfers detect: [ :t | t amount = (transfers max: [ :tr | tr amount ]) ]! !!WorldTransfers methodsFor: 'public' stamp: 'ArturoZambrano 6/6/2018 20:07'!continentWithMoreTransfers	^ (self continents		asSortedCollection: [ :c1 :c2 | (self totalTransfersTo: c1) > (self totalTransfersTo: c2) ])		first! !!WorldTransfers methodsFor: 'private' stamp: 'ArturoZambrano 6/6/2018 19:58'!continents	^ (transfers collect: [ :t | t continent ]) asSet! !!WorldTransfers methodsFor: 'private' stamp: 'ArturoZambrano 6/5/2018 09:43'!selectCheapestMediumFor: aReceiver transferring: anAmount	^ (mediums		asSortedCollection: [ :m1 :m2 | (m1 transferCost: anAmount to: aReceiver) < (m2 transferCost: anAmount to: aReceiver) ])		first! !!WorldTransfers methodsFor: 'private' stamp: 'ArturoZambrano 6/6/2018 20:03'!totalTransfersTo: aContinent	^ (transfers select: [ :t | t continent = aContinent ]) sum: [ :t | t amount ]! !!WorldTransfers methodsFor: 'private' stamp: 'ArturoZambrano 6/5/2018 09:52'!transfer: anAmount to: aReceiver using: aMedium	| transfer |	transfer := Transfer amount: anAmount receiver: aReceiver medium: aMedium.	transfers add: transfer.	^ transfer! !!WorldTransfers methodsFor: 'private' stamp: 'ArturoZambrano 6/5/2018 10:20'!setMediums: aCollection	mediums := aCollection! !!WorldTransfers methodsFor: 'accessing' stamp: 'ArturoZambrano 6/5/2018 09:24'!lessProfitableTransfer! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!WorldTransfers class	instanceVariableNames: ''!!WorldTransfers class methodsFor: 'as yet unclassified' stamp: 'ArturoZambrano 6/5/2018 10:20'!mediums: aCollectionOfMediums	^ self new		setMediums: aCollectionOfMediums;		yourself! !